version: "3.8"

services:
  minder-bot:
    build: .
    container_name: minder-bot
    restart: unless-stopped

    # Environment variables
    env_file:
      - .env

    # Persist database across restarts
    volumes:
      - ./data.db:/app/data.db
      - ./data.db-shm:/app/data.db-shm
      - ./data.db-wal:/app/data.db-wal

    # Resource limits (adjust as needed)
    deploy:
      resources:
        limits:
          cpus: "1.0"
          memory: 512M
        reservations:
          cpus: "0.25"
          memory: 128M

    # Logging configuration
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

    # Network mode (adjust if needed)
    network_mode: bridge
